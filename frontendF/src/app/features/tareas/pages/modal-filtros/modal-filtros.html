<div class="p-2">
  <ion-toolbar>
    <div class="pl-4 font-bold">Filtrar por</div>
    <ion-buttons slot="end">
      <ion-button (click)="limpiarFiltros()">
        <ion-icon name="brush-outline" class="text-blue-500 text-xs mr-2"></ion-icon>
        <span class="underline text-xs text-blue-500">Limpiar filtro</span>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</div>

<div class="px-4 py-2 overflow-y-auto">
  <!-- Filtros para mis tareas -->
  <div class="flex flex-col gap-3" *ngIf="!tareasService.apartadoadmin && selectedTab === 'mis-tareas'">
    <div>
      <span class="text-xs text-gray-600">Prioridad</span>
      <ion-select fill="outline" interface="popover" class="custom-select" [(ngModel)]="filtroPrioridad">
        <ion-select-option value="">Todos</ion-select-option>
        <ion-select-option value="baja">Baja</ion-select-option>
        <ion-select-option value="media">Media</ion-select-option>
        <ion-select-option value="alta">Alta</ion-select-option>
      </ion-select>
    </div>

    <div>
      <span class="text-xs text-gray-600">Por Categoría</span>
      <ion-select fill="outline" interface="popover" class="custom-select" [(ngModel)]="filtroCategoria">
        <ion-select-option value="">Todas</ion-select-option>
        <ion-select-option value="almacenes">Almacenes</ion-select-option>
        <ion-select-option value="limpieza">Limpieza</ion-select-option>
        <ion-select-option value="operaciones">Operaciones</ion-select-option>
      </ion-select>
    </div>

    <div class="flex flex-row gap-2 w-full pb-20">
      <div class="flex flex-col flex-1">
        <span class="text-xs text-gray-600">Estado</span>
        <ion-select fill="outline" interface="popover" class="custom-select" [(ngModel)]="filtroProgreso">
          <ion-select-option value="">Todos</ion-select-option>
          <ion-select-option value="pendiente">Pendiente</ion-select-option>
          <ion-select-option value="en-proceso">En proceso</ion-select-option>
          <ion-select-option value="completada">Completada</ion-select-option>
        </ion-select>
      </div>
    </div>
  </div>

  <!-- Filtro para tareas sin asignar -->
  <div class="flex flex-col gap-3" *ngIf="!tareasService.apartadoadmin && selectedTab === 'tareas-sin-asignar'">
    <span class="text-sm font-medium">Por Categoría</span>
    <div class="flex flex-col gap-1 max-h-60 overflow-y-auto">
      <div *ngFor="let x of listadoCategorias; let i = index" 
           [ngClass]="{'bg-[#F2F5FB]': x.seleccionado}" 
           (click)="toggleSeleccion(i)" 
           class="w-full h-9 flex-none cursor-pointer rounded px-2 flex justify-between items-center">
        <span class="text-black text-sm">{{x.nombre}}</span>
        <fa-icon *ngIf="x.seleccionado" [icon]="faCheck" class="text-primary text-sm"></fa-icon>
      </div>
    </div>
  </div>
</div>

<ion-footer>
  <ion-toolbar>
    <div class="footer-buttons p-4 flex gap-3">
      <ion-button fill="outline" color="medium" expand="block" class="flex-1" (click)="limpiarFiltros()">
        Limpiar
      </ion-button>
      <ion-button fill="solid" color="primary" expand="block" class="flex-1" (click)="aplicarFiltros()">
        Aplicar Filtros
      </ion-button>
    </div>
  </ion-toolbar>
</ion-footer>
