<div class="p-4">
  <ion-toolbar>
    <ion-title class="text-center font-bold">Reaperturar tarea</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="onDismiss()">
        <fa-icon [icon]="faXmark" class="text-gray-500"></fa-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</div>

<ion-content class="ion-padding">
  <div class="space-y-4">
    <!-- Motivo -->
    <div>
      <ion-label class="text-sm font-medium text-gray-700">Motivo de reapertura *</ion-label>
      <ion-textarea
        [(ngModel)]="motivo"
        placeholder="Escribe el motivo por el cual deseas reaperturar esta tarea..."
        rows="4"
        class="mt-2 border rounded-lg p-2">
      </ion-textarea>
    </div>

    <!-- Toggle reasignar -->
    <div class="flex items-center justify-between">
      <ion-label class="text-sm font-medium text-gray-700">¿Reasignar tarea?</ion-label>
      <ion-toggle [(ngModel)]="reasignarTarea" (ionChange)="onToggleChange()"></ion-toggle>
    </div>

    <!-- Campos de reasignación -->
    <div *ngIf="reasignarTarea" class="space-y-3 pl-2 border-l-2 border-blue-300">
      <!-- Selección de cargo -->
      <div (click)="abrirModalCargo()" class="cursor-pointer p-3 bg-gray-50 rounded-lg flex justify-between items-center">
        <div>
          <span class="text-xs text-gray-500">Cargo</span>
          <p class="text-sm font-medium">{{cargoSeleccionado || 'Seleccionar cargo'}}</p>
        </div>
        <ion-icon name="chevron-forward-outline" class="text-gray-400"></ion-icon>
      </div>

      <!-- Selección de usuario -->
      <div (click)="abrirModalUsuario()" class="cursor-pointer p-3 bg-gray-50 rounded-lg flex justify-between items-center">
        <div>
          <span class="text-xs text-gray-500">Usuario</span>
          <p class="text-sm font-medium">{{usuarioSeleccionado || 'Seleccionar usuario'}}</p>
        </div>
        <ion-icon name="chevron-forward-outline" class="text-gray-400"></ion-icon>
      </div>
    </div>
  </div>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <div class="p-4 flex gap-3">
      <ion-button fill="outline" color="medium" expand="block" class="flex-1" (click)="cancelar()">
        <fa-icon [icon]="faXmark" class="mr-2"></fa-icon>
        Cancelar
      </ion-button>
      <ion-button fill="solid" color="primary" expand="block" class="flex-1" 
                  [disabled]="!puedeConfirmar" (click)="confirmar()">
        <fa-icon [icon]="faCheck" class="mr-2"></fa-icon>
        Confirmar
      </ion-button>
    </div>
  </ion-toolbar>
</ion-footer>
