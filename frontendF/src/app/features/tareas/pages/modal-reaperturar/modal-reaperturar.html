<ion-header>
  <ion-toolbar>
    <ion-title class="text-base font-semibold">Reaperturar tarea</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="onDismiss()">
        <fa-icon [icon]="faXmark" class="text-gray-500 text-xl"></fa-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="space-y-5 px-2">
    <!-- Motivo -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-2">
        Motivo de reapertura <span class="text-red-500">*</span>
      </label>
      <ion-textarea
        [(ngModel)]="motivo"
        placeholder="Escribe el motivo por el cual deseas reaperturar esta tarea..."
        rows="4"
        fill="outline"
        mode="md">
      </ion-textarea>
    </div>

    <!-- Toggle reasignar -->
    <div class="flex items-center justify-between py-2">
      <label class="text-sm font-medium text-gray-700">¿Reasignar tarea?</label>
      <ion-toggle [(ngModel)]="reasignarTarea" (ionChange)="onToggleChange()" mode="ios"></ion-toggle>
    </div>

    <!-- Campos de reasignación -->
    <div *ngIf="reasignarTarea" class="space-y-4 pl-4 border-l-2 border-blue-400">
      <!-- Selección de cargo -->
      <div>
        <label class="block text-xs text-gray-500 mb-1">Cargo</label>
        <ion-select 
          [(ngModel)]="cargoSeleccionado" 
          placeholder="Seleccionar cargo"
          interface="action-sheet"
          mode="ios"
          class="w-full border border-gray-300 rounded-lg">
          <ion-select-option value="mesero">Mesero</ion-select-option>
          <ion-select-option value="supervisor">Supervisor</ion-select-option>
          <ion-select-option value="jefe_area">Jefe de Área</ion-select-option>
          <ion-select-option value="coordinador">Coordinador</ion-select-option>
        </ion-select>
      </div>

      <!-- Selección de usuario -->
      <div>
        <label class="block text-xs text-gray-500 mb-1">Usuario</label>
        <ion-select 
          [(ngModel)]="usuarioSeleccionado" 
          placeholder="Seleccionar usuario"
          interface="action-sheet"
          mode="ios"
          class="w-full border border-gray-300 rounded-lg">
          <ion-select-option value="juan">Juan Pérez</ion-select-option>
          <ion-select-option value="maria">María García</ion-select-option>
          <ion-select-option value="carlos">Carlos López</ion-select-option>
          <ion-select-option value="ana">Ana Martínez</ion-select-option>
        </ion-select>
      </div>
    </div>
  </div>
</ion-content>

<ion-footer class="ion-no-border">
  <ion-toolbar>
    <div class="p-4 flex gap-3">
      <ion-button fill="outline" color="medium" expand="block" class="flex-1" (click)="cancelar()">
        Cancelar
      </ion-button>
      <ion-button fill="solid" color="primary" expand="block" class="flex-1" 
                  [disabled]="!puedeConfirmar" (click)="confirmar()">
        <fa-icon [icon]="faCheck" class="mr-2"></fa-icon>
        Confirmar
      </ion-button>
    </div>
  </ion-toolbar>
</ion-footer>
